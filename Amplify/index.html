<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Employee Management System</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root { --bg:#f5f6f7; --btn:#6c757d; --btnHover:#5a6268; --border:#e5e5e5; }
    html, body { height:100%; }
    body {
      margin:0; background:var(--bg);
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
      display:flex; flex-direction:column; min-height:100vh; text-align:center;
    }
    main { flex:1; padding:48px 24px; }
    h1 { margin:0 0 24px; }

    .menu { display:none; justify-content:center; gap:32px; margin-top:32px; }
    .menu a {
      display:inline-block; padding:18px 36px; font-size:20px;
      background:var(--btn); color:#fff; text-decoration:none; border-radius:12px;
      transition:background .2s ease;
    }
    .menu a:hover { background:var(--btnHover); }
    .menu.show { display:flex; }

    footer.auth {
      padding:20px; border-top:1px solid var(--border); background:#fff;
    }
    footer.auth button {
      padding:10px 16px; margin:0 8px; border-radius:10px; border:1px solid #ddd; cursor:pointer; background:#fff;
    }
    .status { color:#666; font-size:14px; margin-left:12px; }
  </style>

  <!-- Amplify UMD + shared AuthKit -->
  <script src="https://unpkg.com/aws-amplify@4.3.13/dist/aws-amplify.min.js"></script>
  <script src="auth-config.js"></script>
</head>
<body>
  <main>
    <h1>Employee Management System</h1>

    <!-- Hidden until signed in -->
    <div id="menu" class="menu">
      <a href="get.html">Get Employee</a>
      <a href="add.html">Add Employee</a>
    </div>
  </main>

  <footer class="auth">
    <button id="loginBtn"  onclick="login()">Login</button>
    <button id="logoutBtn" onclick="logout()" style="display:none">Logout</button>
    <span id="status" class="status">Not signed in</span>
  </footer>

  <script>
    AuthKit.init();

    const menu     = document.getElementById("menu");
    const loginBtn = document.getElementById("loginBtn");
    const logoutBtn= document.getElementById("logoutBtn");
    const statusEl = document.getElementById("status");

    function render(signedIn){
      menu.classList.toggle("show", !!signedIn);
      loginBtn.style.display  = signedIn ? "none" : "inline-block";
      logoutBtn.style.display = signedIn ? "inline-block" : "none";
      statusEl.textContent    = signedIn ? "Signed in" : "Not signed in";
    }

    // Initial paint
    AuthKit.isSignedIn().then(render);

    // Buttons (login returns here after Hosted UI)
    function login(){ AuthKit.login(location.href); }
    function logout(){ AuthKit.logout(); }
    window.login = login; window.logout = logout; // expose for inline

    // React to sign-in/out
    AuthKit.onAuthChange(render);
  </script>
</body>
</html>

